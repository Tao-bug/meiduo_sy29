终端启动Celery服务
celery -A celery_tasks.main worker -l info


数据迁移
python manage.py makemigrations
python manage.py migrate


FastDFS----tracker/storage
sudo docker run -dti --name storage --network=host -e TRACKER_SERVER=172.17.0.1:22122 -v /var/fdfs/storage:/var/fdfs delron/fastdfs storage
sudo docker images
sudo docker container ls -a
sudo docker container start 94c7e733a3c5
sudo docker container stop storage tracker


MySQL主从同步
主
sudo service mysql restart
# 1. 收集主机原有数据
mysqldump -uroot -pmysql --all-databases --lock-all-tables > ~/master_db.sql
# 2. 从机复制主机原有数据
mysql -uroot -pmysql -h127.0.0.1 --port=8306 < ~/master_db.sql

从
sudo docker container start mysql-slave

# 开启测试静态服务器
python -m http.server 8080 --bind 127.0.0.1

# 创建mysql超级用户git push origin heima

python manage.py createsuperuser
root-----mysqlmysql

# 运行后台服务
meiduo_mall_admin/
npm run dev


# 推送
git push origin heima

# nginx  ---  美多后台
配置文件：/etc/nginx/nginx.conf
查看：sudo netstat -tnulp | grep nginx
启动：sudo nginx
停止：sudo nginx -s stop
平滑重启：sudo nginx -s reload
查看版本：nginx -V

控制uwsgi的命令  ----   美多django
启动：uwsgi --ini uwsgi.ini
关闭：uwsgi --stop logs/uwsgi.pid

# dev
美多后台：127.0.0.1:8080
美多django后台：http://www.meiduo.site:8000  ----》改为django自带
美多django:www.meiduo.site:8000 ----》改为jinja2

# prod
美多后台：127.0.0.1:81
美多django:www.meiduo.site

------------------  开发  -------------------------
constant.js 内改地址
~/Desktop/meiduo_sy29/meiduo_mall_admin$ npm run dev
~/Desktop/meiduo_sy29/meiduo_mall$ ...runserver

------------------  上线  --------------------------
前端文件整合
~/Desktop/meiduo_sy29/meiduo_mall_admin$ npm run build
启动 sudo nginx  ----  重启：sudo nginx -s reload
启动 uwsgi --ini uwsgi.ini
注意：ps aux | grep uwsgi
     sudo kill -9

